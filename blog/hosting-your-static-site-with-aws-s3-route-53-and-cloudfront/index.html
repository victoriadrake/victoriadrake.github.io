<!DOCTYPE html>
<html lang="en-us">

    <head>
        
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<meta name="description" content="Victoria Drake, Director of Engineering, is building better cybersecurity and happy and productive technical teams.">
<title>
    Hosting your static site with AWS S3, Route 53, and CloudFront | victoria.dev
</title>



<link href="https://github.com/victoriadrake" rel="me">

<link rel="webmention" href="https://webmention.io/victoria.dev/webmention" />
<link rel="pingback" href="https://webmention.io/victoria.dev/xmlrpc" />
        <script async defer data-domain="victoria.dev" src="https://p.victoria.dev/js/index.js"></script>

        <meta
  name="monetization"
  content="$ilp.uphold.com/pBRfRwg2EJAe">

        <meta property="og:title" content="Hosting your static site with AWS S3, Route 53, and CloudFront - victoria.dev" />
<meta property="og:type" content="website" />
<meta property="og:description"
    content="A guide to using Amazon Web Services to serve your site with HTTPS. For (almost) free." />
<meta property="og:url" content="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/" />
<meta property="og:site_name" content="victoria.dev" />


<meta property="og:image" content="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/cover_aws-questions.png"/>


        <meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="Hosting your static site with AWS S3, Route 53, and CloudFront" />


<meta name="twitter:image" content="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/cover_aws-questions.png"/>

<meta name="twitter:description"
    content="A guide to using Amazon Web Services to serve your site with HTTPS. For (almost) free." />

        
<link rel="shortcut icon" href="/img/favicon.ico">


        





<link rel="stylesheet" href="/css/main.min.b24a173485d1dc8d036f80df3a292a5f843b412cbceb66fff789eaff73266449.css" integrity="sha256-skoXNIXR3I0Db4DfOikqX4Q7QSy862b/94nq/3MmZEk=" media="screen">





        
        
        
        
    </head>

    <body>
        <header role="banner">
            
            <nav aria-label="Victoria.dev main menu" id="menu">
    <ul role="menubar">
        
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/">
                <img src='/img/bookmark.svg' alt='home page icon' height='18px' class='filter-icon'> hi</a >
        </li>
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/blog/">
                <img src='/img/quote.svg' alt='blog icon' height='18px' class='filter-icon'> blog</a >
        </li>
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/about/">
                <img src='/img/profile.svg' alt='about page icon' height='18px' class='filter-icon'> about</a >
        </li>
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/coffee/">
                <img src='/img/coffee.svg' alt='coffee icon' height='18px' class='filter-icon'> buy me coffee</a >
        </li>
        
        <li role="none" class="menu-item ">
            <a role="menuitem" href="/bookshelf/">
                <img src='/img/book.svg' alt='bookshelf icon' height='18px' class='filter-icon'> bookshelf</a >
        </li>
        
        <li role="none" class="menu-item">
            <a role="menuitem" id="rss" href="https://victoria.dev/index.xml" rel="alternate" type="application/rss+xml"
                title="RSS for Hosting your static site with AWS S3, Route 53, and CloudFront" /><img src='/img/rss.svg' alt='RSS icon' height='18px' class='filter-icon'> rss</a>
        </li>
    </ul>
</nav>

            
        </header>
        <main aria-role="main">
            <div class="container">
                



<div id="cover-image">
    <img src="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/cover_aws-questions.png" alt="cover image" />
</div>
<article>
    <h1>


        Hosting your static site with AWS S3, Route 53, and CloudFront
    </h1>
    
    <p class="subtitle">A guide to using Amazon Web Services to serve your site with HTTPS. For (almost) free.</p>
    
    <span>

        
        <a class="tag button" href="/tags/aws/">
            aws
        </a>&nbsp;
        
        <a class="tag button" href="/tags/websites/">
            websites
        </a>&nbsp;
        
        
    </span>
    <p class="metadata" id="date">
        <span><a class="u-url dt-published" href="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/">December 13, 2017</a></span>
        
        <span>
            <em>Updated: Nov 14, 2020</em>
        </span>
        
        <span>
             ‚òïÔ∏è ‚òïÔ∏è&nbsp;7 min read
        </span>
    </p>

    
    </p>

    

    <div class="page-separator">
        <hr />
    </div>

    <div class="markdown e-content">
        <p>Some time ago I decided to stop freeloading on GitHub pages and move one of my sites to Amazon Web Services (AWS). It turns out that I&rsquo;m still mostly freeloading (yay free tier) so it amounted to a learning experience. Here are the components that let me host and serve the site at my custom domain with HTTPS.</p>
<ul>
<li>Static site in Amazon Web Services S3 bucket</li>
<li>Route 53 handling the DNS</li>
<li>CloudFront for distribution and a custom SSL certificate</li>
</ul>
<p>I set all that up most of a year ago. At the time, I found the AWS documentation to be rather fragmented and inconvenient to follow - it was hard to find what you were looking for without knowing what a specific setting might be called, or where it was, or if it existed at all. When I recently set up a new site and stumbled through this process again, I didn&rsquo;t find it any easier. Hopefully this post can help to collect the relevant information into a more easily followed process and serve as an accompanying guide to save future me (and you) some time.</p>
<p>Rather than replace existing documentation, this post is meant to supplement it. Think of me as your cool tech-savvy friend on the phone with you at 4am, troubleshooting your website. (Please don&rsquo;t actually call me at 4am.) I&rsquo;ll walk through the set up while providing links for the documentation that was ultimately helpful (mostly so I can find it again later&hellip;).</p>
<h2 id="hosting-a-static-site-with-amazon-s3-and-a-custom-domain" class="anchor-link"><a href="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/#hosting-a-static-site-with-amazon-s3-and-a-custom-domain">Hosting a static site with Amazon S3 and a custom domain</a></h2>
<p>If you&rsquo;re starting from scratch, you&rsquo;ll need an AWS account. It behooves you to get one, even if you don&rsquo;t like paying for services - there&rsquo;s a free tier that will cover most of the experimental stuff you&rsquo;re going to want to do in the first year, and even the things I do pay for cost me less than a dollar a month. You can sign up at <a href="https://aws.amazon.com/free">https://aws.amazon.com/free</a>.</p>
<p>Getting your static site hosted and available at your custom domain is your first mission, should you choose to accept it. <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html">Your instructions are here.</a></p>
<p>Creating the buckets for site hosting on S3 is the most straightforward part of this process in my opinion, and the AWS documentation walkthrough covers what you&rsquo;ll need to do quite well. It gets a little unclear around <em>Step 3: Create and Configure Amazon Route 53 Hosted Zone</em>, so come back and read on once you&rsquo;ve reached that point. I&rsquo;ll make some tea in the meantime.</p>
<p>&hellip; üé∂ üéµ</p>
<p>Ready? Cool. See, I&rsquo;m here for you.</p>
<h2 id="set-up-route-53" class="anchor-link"><a href="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/#set-up-route-53">Set up Route 53</a></h2>
<p>The majority of the work in this section amounts to creating the correct record sets for your custom domain. If you&rsquo;re already familiar with how record sets work, the documentation is a bit of a slog. Here&rsquo;s how it should look when you&rsquo;re finished:</p>
<p>

<img src="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/aws-recordsets.png#screenshot" alt="Route 53 record sets."  />

</p>
<p>The &ldquo;NS&rdquo; and &ldquo;SOA&rdquo; records are created automatically for you. The only records you need to create are the &ldquo;A&rdquo; records.</p>
<p>Hop over to Route 53 and follow <a href="http://docs.aws.amazon.com/Route53/latest/DeveloperGuide/MigratingDNS.html">this walkthrough</a> to create a &ldquo;hosted zone.&rdquo; The value of the <strong>NS</strong> (Name Servers) records are what you&rsquo;ll have to provide to your domain name registrar. Your registrar is wherever you bought your custom domain, such as this super subtle <a href="https://www.jdoqocy.com/ds70r09608OQPPRVXSQPOQSRVVVVX" target="_top">Namecheap.com affiliate link</a>
 right here. (Thanks for your support! üòä)</p>
<p>If you created two buckets in the first section (one for <code>yourdomain.com</code> and one for <code>www.yourdomain.com</code>), you&rsquo;ll need two separate A records in Route 53. Initially, these have the value of the endpoints for your matching S3 buckets (looks like <code>s3-website.us-east-2.amazonaws.com</code>). Later, you&rsquo;ll change them to your CloudFront domain name.</p>
<p>If you went with Namecheap as your registrar, <a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html#root-domain-walkthrough-update-ns-record">Step 4</a> looks like this:</p>
<p>

<img src="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/aws-namecheapdns.png#screenshot" alt="Namecheap&amp;rsquo;s Custom DNS settings."  />

</p>
<p>Waiting is the hardest part&hellip; I&rsquo;ve gotten into the habit of working on another project or setting up the DNS change before going to bed so that changes have time to propagate without me feeling like I need to fiddle with it. ^^;</p>
<p>When the transfer&rsquo;s ready, you&rsquo;ll see your site at <code>http://yourdomain.com</code>. Next, you&rsquo;ll want to set up CloudFront so that becomes <code>https://yourdomain.com</code>.</p>
<h2 id="set-up-cloudfront-and-ssl" class="anchor-link"><a href="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/#set-up-cloudfront-and-ssl">Set up CloudFront and SSL</a></h2>
<p><a href="http://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-cloudfront-walkthrough.html">Here are the instructions for setting up CloudFront.</a> There are a few important points to make sure you don&rsquo;t miss on the &ldquo;Create Distribution&rdquo; page:</p>
<ul>
<li><strong>Origin Domain Name:</strong> Make sure to use your S3 bucket endpoint, and not select the bucket from the dropdown menu that appears.</li>
<li><strong>Viewer Protocol Policy:</strong> If you want requests for <code>http://yourdomain.com</code> to always result in <code>https://yourdomain.com</code>, choose &ldquo;Redirect HTTP to HTTPS.&rdquo;</li>
<li><strong>Alternate Domain Names:</strong> Enter <code>yourdomain.com</code> and <code>www.yourdomain.com</code> on separate lines.</li>
<li><strong>SSL Certificate:</strong> See below.</li>
<li><strong>Default Root Object:</strong> Enter the name of the html file that should be returned when your users go to <code>https://yourdomain.com</code>. This is usually &ldquo;index.html&rdquo;.</li>
</ul>
<h3 id="ssl-certificate" class="anchor-link"><a href="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/#ssl-certificate">SSL Certificate</a></h3>
<p>To show your content with HTTPS at your custom domain, you&rsquo;ll need to choose &ldquo;Custom SSL Certificate.&rdquo; You can easily get an SSL Certificate with AWS Certificate Manager. Click on &ldquo;Request or Import a Certificate with ACM&rdquo; to get started in a new window.</p>
<p><a href="http://docs.aws.amazon.com/acm/latest/userguide/gs-acm-request.html">Here are instructions for setting up a certificate.</a> I don&rsquo;t think they&rsquo;re very good, personally. Don&rsquo;t worry, I got you.</p>
<p>To account for &ldquo;<a href="http://www.yourdomain.com">www.yourdomain.com</a>&rdquo; as well as any subdomains, you&rsquo;ll want to add two domain names to the certificate, like so:</p>
<p>

<img src="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/aws-acmdomains.png#screenshot" alt="Adding domain names to ACM."  />

</p>
<p>Click &ldquo;Next.&rdquo; You&rsquo;ll be asked to choose a validation method. Choose &ldquo;DNS validation&rdquo; and click &ldquo;Review.&rdquo; If everything is as it should be, click &ldquo;Confirm and request.&rdquo;</p>
<p>You&rsquo;ll see a page, &ldquo;Validation&rdquo; that looks like this. You&rsquo;ll have to click the little arrow next to both domain names to get the important information to show:</p>
<p>

<img src="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/aws-acmvalidation.png#screenshot" alt="Validation instructions for ACM."  />

</p>
<p>Under both domain names, click the button for &ldquo;Create record in Route 53.&rdquo; This will automatically create a CNAME record set in Route 53 with the given values, which ACM will then check in order to validate that you own those domains. You could create the records manually, if you wanted to for some reason. I don&rsquo;t know, maybe you&rsquo;re killing time. ¬Ø\_(„ÉÑ)_/¬Ø</p>
<p>Click &ldquo;Continue.&rdquo; You&rsquo;ll see a console that looks like this:</p>
<p>

<img src="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/aws-acmcertificates.png#screenshot" alt="List of certificates you own."  />

</p>
<p>It may take some time for the validation to complete, at which point the &ldquo;Pending validation&rdquo; status will change to &ldquo;Issued.&rdquo; Again with the waiting. You can close this window to return to the CloudFront set up. Once the certificate is validated, you&rsquo;ll see it in the dropdown menu under &ldquo;Custom SSL Certificate.&rdquo; You can click &ldquo;Create Distribution&rdquo; to finish setting up CloudFront.</p>
<p>In your CloudFront Distributions console, you&rsquo;ll see &ldquo;In Progress&rdquo; until AWS has done its thing. Once it&rsquo;s done, it&rsquo;ll change to &ldquo;Deployed.&rdquo;</p>
<h3 id="one-last-thing" class="anchor-link"><a href="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/#one-last-thing">One last thing</a></h3>
<p>Return to your <a href="https://console.aws.amazon.com/route53/">Route 53 console</a> and click on &ldquo;Hosted zones&rdquo; in the sidebar, then your domain name from the list. For both A records, change the &ldquo;Alias Target&rdquo; from the S3 endpoint to your CloudFront distribution domain, which should look something like <code>dj4p1rv6mvubz.cloudfront.net</code>. It appears in the dropdown after you clear the field.</p>
<h2 id="youre-done" class="anchor-link"><a href="https://victoria.dev/blog/hosting-your-static-site-with-aws-s3-route-53-and-cloudfront/#youre-done">You&rsquo;re done</a></h2>
<p>Well, usually. If you navigate to your new HTTPS domain and don&rsquo;t see your beautiful new site where it should be, here are some things you can do:</p>
<ol>
<li>Check S3 bucket policy - ensure that the bucket for <code>yourdomain.com</code> in the S3 console shows &ldquo;Public&rdquo; in the &ldquo;Access&rdquo; column.</li>
<li>Check S3 bucket index document - In the &ldquo;Properties&rdquo; tab for the bucket, then &ldquo;Static website hosting&rdquo;. Usually &ldquo;index.html&rdquo;.</li>
<li>Check CloudFront Origin - the &ldquo;Origin&rdquo; column in the CloudFront Console should show the S3 bucket&rsquo;s endpoint (<code>s3-website.us-east-2.amazonaws.com</code>), not the bucket name (<code>yourdomain.com.s3.amazonaws.com</code>).</li>
<li>Check CloudFront Default Root Object - clicking on the distribution name should take you to a details page that shows &ldquo;Default Root Object&rdquo; in the list with the value that you set, usually &ldquo;index.html&rdquo;.</li>
<li>Wait. Sometimes changes take up to 48hrs to propagate. ¬Ø\_(„ÉÑ)_/¬Ø</li>
</ol>
<p>I hope that helps you get set up with your new static site on AWS! If you found this post helpful, there&rsquo;s a lot more where this came from. You can <a href="/">subscribe to victoria.dev</a> to see new posts first!</p>

    </div>
</article>

<div id="up-container">
    <a href="#" id="up">&#709;</a>
</div>

<div class="page-separator">
    <hr />
</div>


<div id="webmentions"></div>


<a href="https://brid.gy/publish/twitter"></a>
<data class="p-bridgy-omit-link" value="false"></data>



<div class="related">
    <code class="language-sql" data-lang="sql">SELECT TOP 3 * FROM Related;</code>
    <ul role="menubar" id="article-list">
        
        

<li role="none">
    <a role="menuitem" class="article-link" href="https://victoria.dev/blog/build-your-own-serverless-subscriber-list-with-go-and-aws/">Build your own serverless subscriber list with Go and AWS</a>
    <p>
        How to build your own newsletter list with DynamoDB and SES email sign up confirmations.
    </p>
    
    <p class="metadata">
        
        <a class="tag button" href="/tags/api/">api</a>
        
         ‚òïÔ∏è ‚òïÔ∏è
        &nbsp;7 min read
        
    </p>
    
</li>



        
        

<li role="none">
    <a role="menuitem" class="article-link" href="https://victoria.dev/blog/migrating-to-the-cloud-but-without-screwing-it-up-or-how-to-move-house/">Migrating to the cloud but without screwing it up, or how to move house</a>
    <p>
        A practical guide to moving to cloud services with minimal downtime, using AWS examples.
    </p>
    
    <p class="metadata">
        
        <a class="tag button" href="/tags/aws/">aws</a>
        
         ‚òïÔ∏è ‚òïÔ∏è
        &nbsp;11 min read
        
    </p>
    
</li>



        
        

<li role="none">
    <a role="menuitem" class="article-link" href="https://victoria.dev/blog/moving-to-a-new-domain-without-breaking-old-links-with-aws-disqus/">Moving to a new domain without breaking old links with AWS &amp; Disqus</a>
    <p>
        I moved my site&#39;s blog to its own domain without breaking old links or losing comments. Here&#39;s how.
    </p>
    
    <p class="metadata">
        
        <a class="tag button" href="/tags/aws/">aws</a>
        
         ‚òïÔ∏è
        &nbsp;3 min read
        
    </p>
    
</li>



        
    </ul>
    

    <div class="page-separator">
        <p class="back-link"><a href="/blog">
                &lt;&lt; Back to blog</a>
        </p>
    </div>
</div>

            </div>

            <footer class="container">
                





<div class="markdown bio h-card p-author">
    
    <strong><a href="https://victoria.dev/" class="u-url p-name">Victoria Drake</a></strong>
    <figure class="profile title-avatar u-photo">
    <img src="/img/victoria_headshot.jpg"
         alt="Victoria&#39;s headshot"/> 
</figure>

<p>Victoria Drake is a Director of Engineering in Washington, DC. She is a core maintainer and co-author for the Open Web Application Security Project (OWASP) Web Security Testing Guide. She earned the annual Top Contributor award three years in a row from the freeCodeCamp non-profit, and is a recognized Distinguished Author on the DEV.to developer platform. She writes about software development, cybersecurity, and building happy and productive technical teams.</p>
<p><a href="/about">about</a> - <a href="mailto:hello@victoria.dev">email</a> - <a href="https://github.com/victoriadrake">github</a> - <a href="https://twitter.com/victoriadotdev">twitter</a> - <a href="https://www.linkedin.com/in/victoriadotdev/">linkedin</a></p>

</div>




            </footer>
        </main>

        
        

<script src="/js/webmention.min.js" data-wordcount="42" async></script>


        <nav aria-label="Victoria.dev menu for mobile" id="menu-mobile">
            <ul role="menubar">
                
                
                <li role="none" class="menu-item">
                    <a role="menuitem"
                        href="/">
                        <img src='/img/bookmark.svg' alt='home page icon' height='18px' class='filter-icon'></a >
                </li>
                
                <li role="none" class="menu-item">
                    <a role="menuitem"
                        href="/blog/">
                        <img src='/img/quote.svg' alt='blog icon' height='18px' class='filter-icon'></a >
                </li>
                
                <li role="none" class="menu-item">
                    <a role="menuitem"
                        href="/about/">
                        <img src='/img/profile.svg' alt='about page icon' height='18px' class='filter-icon'></a >
                </li>
                
                <li role="none" class="menu-item">
                    <a role="menuitem"
                        href="/coffee/">
                        <img src='/img/coffee.svg' alt='coffee icon' height='18px' class='filter-icon'></a >
                </li>
                
                <li role="none" class="menu-item">
                    <a role="menuitem"
                        href="/bookshelf/">
                        <img src='/img/book.svg' alt='bookshelf icon' height='18px' class='filter-icon'></a >
                </li>
                
            </ul>
        </nav>
    </body>

</html>
